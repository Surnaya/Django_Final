{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
    <h1>Welcome to the Recipe Site</h1>
    {% if user.is_authenticated %}
        <p>Hello, {{ user.username }}! You are logged in.</p>
        <a href="{% url 'logout' %}">Logout</a>
    {% else %}
        <p>You are not logged in.</p>
        <a href="{% url 'login' %}">Login</a> | <a href="{% url 'signup' %}">Sign Up</a>
    {% endif %}
    <br>
    <a href="{% url 'recipe_list' %}">View Recipes</a>
    <a href="{% url 'recipe_create' %}">Add New Recipe</a>

    <h2>Random Recipes</h2>
    <div class="random-recipes">
    {% for recipe in recipes %}
        <div class="recipe-summary">
            <h3><a href="{% url 'recipe_detail' recipe.pk %}">{{ recipe.title }}</a></h3>
            <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
            <p>Category: {% for category in recipe.category.all %}{{ category.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
            <p>Cooking time: {{ recipe.cooking_time }} minutes</p>
            <p>Ingredients: {{ recipe.ingredients|truncatewords:20 }}</p>
        </div>
    {% endfor %}
    </div>
{% endblock %}
